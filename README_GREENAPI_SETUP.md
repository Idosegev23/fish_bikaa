# GreenAPI Integration Setup

## 📱 איך להגדיר שליחת WhatsApp עם GreenAPI

### 1. יצירת חשבון GreenAPI
1. היכנסו ל: https://console.green-api.com/
2. הירשמו או התחברו לחשבון קיים
3. צרו instance חדש של WhatsApp

### 2. קבלת פרטי ההתחברות
לאחר יצירת ה-instance תקבלו:
- **Instance ID** - מזהה המכשיר
- **API Token** - מפתח הגישה

### 3. הגדרת משתני הסביבה
צרו קובץ `.env` בבסיס הפרויקט:

```env
# GreenAPI Configuration
VITE_GREENAPI_INSTANCE_ID=1101xxxxxx
VITE_GREENAPI_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Admin phone number
VITE_ADMIN_PHONE=972501234567
```

### 4. סריקת QR Code
1. בקונסול GreenAPI, לחצו על "QR Code"
2. סרקו את הקוד עם האפליקציה של WhatsApp
3. וודאו שהסטטוס הוא "authorized"

### 5. בדיקת התקנה
המערכת תשלח הודעות WhatsApp אוטומטית כאשר:
- לקוח מסיים הזמנה → הודעה ללקוח + למנהל
- אם GreenAPI לא זמין → גיבוי עם פתיחת WhatsApp Web

## 📋 מבנה ההודעות

### הודעה ללקוח:
```
🐟 דגי בקעת אונו - אישור הזמנה

📋 מספר הזמנה: 123
👤 שלום יוסי כהן

✅ הזמנתך התקבלה בהצלחה!

📦 פרטי ההזמנה:
1. דניס - פילטים
   כמות: 2 יח׳ | מחיר: ₪106.00

💰 סה"כ לתשלום: ₪106.00

📅 פרטי איסוף:
📍 כתובת: רחוב הרצל 10
📅 תאריך: 22/09/2025
🕒 שעה: 09:00-10:00

🙏 תודה שבחרתם בנו!
```

### הודעה למנהל:
```
🚨 הזמנה חדשה מהאתר!

📋 מספר הזמנה: 123

👤 פרטי לקוח:
שם: יוסי כהן
טלפון: 050-1234567

📅 פרטי איסוף:
תאריך: 22/09/2025
שעה: 09:00-10:00

🐟 פרטי הזמנה:
1. דניס (פילטים) - 2 יח׳

💰 סה"כ: ₪106.00
```

## 🔧 פתרון בעיות

### GreenAPI לא עובד?
1. בדקו שה-instance מחובר ב: https://console.green-api.com/
2. ודאו שמשתני הסביבה נכונים
3. בדקו את הלוגים בקונסול הדפדפן

### הודעות לא מגיעות?
1. ודאו שמספר הטלפון תקין (פורמט בינלאומי)
2. בדקו שה-WhatsApp של המקבל פעיל
3. ודאו שאין חסימה של הנשלח

### גיבוי WhatsApp Web
אם GreenAPI נכשל, המערכת תפתח אוטומטית WhatsApp Web עם ההודעה מוכנה לשליחה.

## 💡 טיפים

1. **בסביבת פיתוח**: אפשר להשאיר את המשתנים ריקים - המערכת תעבוד במצב demo
2. **בפרודקשן**: חובה להגדיר את כל המשתנים כדי ששליחת ההודעות תעבוד
3. **עלויות**: GreenAPI מחייב לפי כמות הודעות - בדקו את התעריפים שלהם

## 📞 תמיכה

אם יש בעיות, פנו אל:
- GreenAPI Support: https://green-api.com/support/
- תיעוד API: https://green-api.com/docs/